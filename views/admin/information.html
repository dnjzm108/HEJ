<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학원소개</title>
    <style>
        #infom {
            margin-top: 50px;
            height: 150px;
            margin-bottom: 20px;
        }

        #infom>h1 {
            margin-bottom: 30px;
        }
    </style>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
    <!-- <script>
        document.addEventListener("DOMContentLoaded", () => {
            let idArr = document.querySelector('#idArr').value;
            idArr = idArr.split(',');
            idArr.splice(idArr.length - 1, 1);
            idArr.forEach(v => {
                let content = document.querySelector('#content' + v);
                let pre = document.querySelector('#pre' + v);
                pre.innerHTML = `${content.value}`
            })
        });

    </script> -->
</head>

<body>
    <div id="wrap">
        <div id="main" class="container">
            <div id="infom">
                <h1>INFORMATION</h1>
                <div id="atags">
                    <a class="btn" href="/admin/information">전체</a>
                    <a class="btn" href="/admin/information/intro">인사말</a>
                    <a class="btn" href="/admin/information/history">연혁</a>
                    <a class="btn" href="/admin/information/staff">교직원소개</a>
                    <a class="btn" href="/admin/information/facility">시설소개</a>
                    <a class="btn" href="/admin/information/location">오시는 길</a>
                </div>
            </div>
            <div id="board" style="margin-bottom: 50px;">
                <!-- <input type="hidden" value="{{idArr}}" id="idArr"> -->
                <form id="visibility" action="/admin/information_update" method="POST">
                    {% if localUrl != undefined %}
                    <input type="submit" class="btn" value="저장">
                    {% endif %}
                    <table class="table table-borderede" id="list">
                        <thead>
                            <tr>
                                <td>No.</td>
                                {% if localUrl != undefined %}
                                <td>Visibility</td>
                                {% endif %}
                                <td>Title</td>
                                {% if localUrl == undefined %}
                                <td>Category</td>
                                {% endif %}
                                <td>Writer</td>
                                <td>Date</td>
                            </tr>
                        </thead>
                        {% for item in infoList %}
                        <textarea class="itemInfo" style="display: none;">{{item.id}},{{item.visibility}}</textarea>
                        <tbody>
                            <tr>
                                <td>{{item.num}}</td>
                                <input type="hidden" name="num" value="{{item.num}}">
                                {% if localUrl != undefined %}
                                <td><input class="visible" type="radio" name="visibility" value="{{item.id}}"></td>
                                {% endif %}
                                <td><a href="/admin/view?id={{item.id}}&table=information&localUrl={{localUrl}}">{{item.title}}</a></td>
                                {% if localUrl == undefined %}
                                <td><a href="/admin/information/{{item.type}}">{{item.type}}</a></td>
                                {% endif %}
                                <td>{{item.writer}}</td>
                                <td>{{item.date}}</td>
                            </tr>
                        </tbody>
                        {% endfor %}
                    </table>
                    <textarea style="display:none" name="local">{{localUrl}}</textarea>
                </form>
                <!-- <div id="content_wrap">
                    {% for item in infoList %}
                    <h2>{{item.title}}</h2>
                    <pre id="pre{{item.id}}"></pre>
                    <textarea id="content{{item.id}}" style="display: none;">{{item.content}}</textarea>
                    {% endfor %}
                </div> -->
            </div>
            <div class="footer center">
                <div id="pagenation">
                    {% for item in pagin %}
                    <a href="/admin/community/{{localUrl}}?id={{item}}">{{item}}</a>
                    {% endfor %}
                </div>
                {% if localUrl != undefined %}
                <a class="btn" href="/admin/upload?title=information&localUrl={{localUrl}}">WRITE</a>
                {% endif %}
                <a class="main_btn btn" href="/admin/main">MAIN</a>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const itemInfo = document.querySelectorAll('.itemInfo');
        itemInfo.forEach(v=>{
            let list = v.value.split(",");
            if(list[1] == 1){
                return result=list[0]
            }
        })
        const visible = document.querySelectorAll('.visible');
        visible.forEach(v=>{
            if(v.value == result){
                v.checked = true;
            }
        })
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4./jquery.min.js"></script>
    <script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
</body>
</html>